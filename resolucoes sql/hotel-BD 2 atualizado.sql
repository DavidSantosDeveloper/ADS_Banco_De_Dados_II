-- Criando Tabelas:

	CREATE TABLE CATEGORIA (
		COD_CAT INT NOT NULL,
		NOME VARCHAR(50) NOT NULL,
		VALOR_DIA FLOAT NOT NULL,
		CONSTRAINT PRI_CAT PRIMARY KEY(COD_CAT)
	);

	CREATE TABLE APARTAMENTO (
		NUM INT NOT NULL PRIMARY KEY,
		STATUS CHAR(1) NOT NULL,
		COD_CAT INT NOT NULL,
		CONSTRAINT EST_APTO FOREIGN KEY(COD_CAT) REFERENCES CATEGORIA(COD_CAT)
	);
	
	CREATE TABLE HOSPEDE (
		COD_HOSP INT NOT NULL,
		NOME VARCHAR(50) NOT NULL,
		DT_NASC DATE NOT NULL,
		CONSTRAINT PRI_HOSP PRIMARY KEY(COD_HOSP)
	);
	
	CREATE TABLE HOSPEDAGEM (
		COD_HOSPEDA INT NOT NULL,
		COD_HOSP INT NOT NULL,
		NUM INT NOT NULL,
		DT_ENT DATE NOT NULL,
		DT_SAI DATE,
		CONSTRAINT PRI_HOSPEDA PRIMARY KEY(COD_HOSPEDA),
		CONSTRAINT EST_HOSP FOREIGN KEY(COD_HOSP) REFERENCES HOSPEDE(COD_HOSP),
		CONSTRAINT EST_APTO FOREIGN KEY(NUM) REFERENCES APARTAMENTO(NUM)
	);

	/*
	CREATE TABLE SERVICO (
		COD_SERV INT NOT NULL,
		NOME VARCHAR(50) NOT NULL,
		VALOR FLOAT NOT NULL,
		CONSTRAINT PRI_SERV PRIMARY KEY(COD_SERV)
	);
	
	CREATE TABLE SOLICITACAO (
		COD_SOL INT NOT NULL,
		COD_HOSPEDA INT NOT NULL,
		COD_SERV INT NOT NULL,
		DT_SOL DATE NOT NULL,
		QUANT INT NOT NULL,
		CONSTRAINT PRI_SOLIC PRIMARY KEY(COD_SOL),
		CONSTRAINT EST_HOSPEDA FOREIGN KEY(COD_HOSPEDA) REFERENCES HOSPEDAGEM(COD_HOSPEDA),
		CONSTRAINT EST_SERV FOREIGN KEY(COD_SERV) REFERENCES SERVICO(COD_SERV)
	);
	*/

	CREATE TABLE RESERVA{
		COD_RES INT NOT NULL PRIMARY KEY,
		COD_HOSP INT NOT NULL REFERENCES HOSPEDE(COD_HOSP),
		NUM INT NOT NULL REFERENCES APARTAMENTO(NUM),
		DT_RES DATE NOT NULL,
		DT_PREV_ENT DATE NOT NULL,
		DT_PREV_SAI DATE NOT NULL
	}



	CREATE TABLE FUNCIONARIO (
		COD_FUNC INT NOT NULL,
		NOME VARCHAR(50) NOT NULL,
		SALARIO float null,
		DT_NASC DATE NOT NULL,	
		CONSTRAINT PRI_FUNC PRIMARY KEY(COD_FUNC)
	);
	insert into funcionario values(1,'maria jose',1412.00,'2000-01-01')

	-- ALTER TABLE table_name ADD COLUMN column_definition;

	ALTER TABLE hospedagem ADD COLUMN cod_func int not null REFERENCES funcionario(cod_func) default 1;

	ALTER TABLE reserva ADD COLUMN cod_func int not null REFERENCES funcionario(cod_func) default 1;




-- Inserindo dados:
 
	INSERT INTO CATEGORIA (COD_CAT, NOME, VALOR_DIA) 
	VALUES 
		(1, 'Econômica', 100.00), 
		(2, 'Luxo', 300.00), 
		(3, 'Premium', 500.00);
		
	INSERT INTO APARTAMENTO (NUM, STATUS, COD_CAT) 
	VALUES 
		(101, 'L', 1), 
		(102, 'L', 1), 
		(103, 'O', 2);
		
	INSERT INTO HOSPEDE (COD_HOSP, NOME, DT_NASC) 
	VALUES 
		(1, 'João Silva', '1985-05-01'), 
		(2, 'Maria Santos', '1990-09-15'), 
		(3, 'Pedro Souza', '1978-02-22');
		
	INSERT INTO HOSPEDAGEM (COD_HOSPEDA, COD_HOSP, NUM, DT_ENT, DT_SAI) 
	VALUES 
		(1, 1, 101, '2022-02-28', '2022-03-03'), 
		(2, 2, 103, '2022-03-10', NULL), 
		(3, 3, 102, '2022-03-15', '2022-03-20');

insert into apartamento values(104,'L',3)
insert into apartamento values(105,'L',3)

insert into hospedagem values(4,1,104,'2024-01-01','2024-01-30')
insert into hospedagem values(5,2,104,'2024-02-05','2024-02-15')
insert into hospedagem values(6,3,105,'2024-03-13','2024-03-25')
		
	/*	
	INSERT INTO SERVICO (COD_SERV, NOME, VALOR) 
	VALUES 
		(1, 'Café da manhã', 15.00), 
		(2, 'Lavanderia', 50.00), 
		(3, 'Internet sem fio', 20.00);
		
	INSERT INTO SOLICITACAO (COD_SOL, COD_HOSPEDA, COD_SERV, DT_SOL, QUANT) 
	VALUES 
		(1, 1, 1, '2022-03-01', 2), 
		(2, 2, 3, '2022-03-11', 1), 
		(3, 3, 2, '2022-03-17', 3);
	*/

